<html>

<head>
    <title>Cloudy</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/springy.js"></script>
    <script src="js/springyui.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/css/site.css" />

    <script type="module" src="/js/viewer.js"></script>
</head>

<body>
    <div class="Container-fluid h-100">
        <div class="row header">
            <div class="col">
                <button class="btn btn-primary" id="btnConnect">Connect</button>
                <button class="btn btn-primary" id="btnSave">Save</button>
                <button class="btn btn-primary" id="btnLoad">Load</button>
                <button class="btn btn-primary" id="btnFontSmaller">Smaller</button>
                <button class="btn btn-primary" id="btnFontBigger">Bigger</button>
                <button class="btn btn-primary" id="btnZoomIn">Zoom+</button>
                <button class="btn btn-primary" id="btnZoomOut">Zoom-</button>
            </div>
            <div class="col">
                <input class="form-control" id="fileField" type="file" />
            </div>
            <div class="col">
                <div id="messageField"></div>
            </div>
        </div>
        <div class="row content">
            <div class="col-9 h-100 canvasContainer" id="canvasDiv">
                <canvas id="cloudCanvas" width="800px" height="500px"></canvas>
            </div>
            <div class="col-3 inputContainer">
                <div id="CloudTextModel" contenteditable="true">
                    <ul>
                        <li id="1">Test1</li>
                        <ul>
                            <li id="1.1">Test1.1</li>
                            <li id="1.2">Test1.2</li>
                            <li id="1.3">Test1.3</li>
                        </ul>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
<script type="module">
    import Editor from './ts/editor.js';
    const editor = new Editor();
    var reader = new FileReader();
    document.getElementById('CloudTextModel').addEventListener("keydown", editor.keyPressEventHandler.bind(this));
    document.getElementById('CloudTextModel').addEventListener("keyup", editor.keyUpEventHandler.bind(this));
    document.getElementById('btnSave').addEventListener("click", () => { editor.save(document.getElementById('CloudTextModel').innerHTML) }, false);
    document.getElementById('fileField').addEventListener("change", function () { console.log("Reading File..."); var file = this.files[0]; reader.readAsText(file); });
    reader.onload = function (e) { editor.load(e.target.result, document.getElementById('CloudTextModel')) };
</script>

</html>